<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Dispatch REST API v3</title>
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    <link rel="shortcut icon" type="image/png" href="images/favicon.png"/>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #272822;
  background-color: #f92672;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #75715e;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #f8f8f2;
}
.highlight .p, .highlight .pi {
  color: #f8f8f2;
}
.highlight .gi {
  color: #a6e22e;
}
.highlight .gd {
  color: #f92672;
}
.highlight .gh {
  color: #66d9ef;
  background-color: #272822;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #ae81ff;
}
.highlight .kc {
  color: #fd971f;
}
.highlight .kt {
  color: #fd971f;
}
.highlight .kd {
  color: #fd971f;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #a6e22e;
}
.highlight .sr {
  color: #a1efe4;
}
.highlight .si {
  color: #cc6633;
}
.highlight .se {
  color: #cc6633;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #66d9ef;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #a6e22e;
}
.highlight .ss {
  color: #a6e22e;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;json&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="json">json</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href="http://www.dispatch.me" target="_blank">Dispatch Website</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="getting-started">Getting Started</h1>

<p>Welcome to the Dispatch REST API documentation. Our REST API allows you to easily interact with our core business entities to implement your workflow in our platform.</p>

<h2 id="who-should-use-this-api">Who should use this API?</h2>

<ul>
<li>Job sources and lead generation platforms for third-party networks of service providers (e.g. warranty companies, equipment manufacturers)</li>
<li>Service enterprises with multiple branches in a first-party network</li>
<li>Individual service providers who receive work from these sources</li>
</ul>

<p>Job sources, regardless of network type, must authenticate using <a href="#client-credentials-auth">client credentials authentication</a>, which will provide access to objects assigned to all service providers in the network. Service providers must authenticate using <a href="#user-auth">user authentication</a>.</p>

<h2 id="environments">Environments</h2>

<p>We have two environments for public access to the API.</p>

<p>Our <strong>sandbox</strong> environment is meant for you to test your integration before putting it into the wild. That API is located at https://api-sandbox.dispatch.me, and you can access our desktop application at https://work-sandbox.dispatch.me.</p>

<p>Our <strong>production</strong> environment is for real jobs and customers. That API is located at https://api.dispatch.me, and you can access our desktop application at https://work.dispatch.me.</p>

<p>Note that your account manager will give you a different set of credentials for each environment.</p>

<h2 id="signing-up">Signing Up</h2>

<p>If you&rsquo;re interested in using our API, please work with your account manager and we&rsquo;ll set you up with your credentials. Don&rsquo;t have an account manager? Provide your information here and we&rsquo;ll get back to you.</p>

<h2 id="dispatch-business-objects">Dispatch Business Objects</h2>

<p>Here&rsquo;s a brief description of our business objects and their role in the Dispatch system.</p>

<table><thead>
<tr>
<th>Entity</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#jobs">Job</a></td>
<td>A single body of work for a <a href="#customers">customer</a>, assigned to an <a href="#organization">organization</a>.</td>
</tr>
<tr>
<td><a href="#customers">Customer</a></td>
<td>A job currently belongs to a single customer, representing the homeowner.</td>
</tr>
<tr>
<td><a href="#organizations">Organization</a></td>
<td>Jobs are assigned to a single organization, who is responsible for doing the work. Depending on your business model, this could be a branch of your business, or a third-party service provider you have an agreement with.</td>
</tr>
<tr>
<td><a href="#appointments">Appointment</a></td>
<td>Scheduled times at which an assigned <a href="#users">user</a> (technician) will perform the work for the job</td>
</tr>
<tr>
<td><a href="#attachments">Attachment</a></td>
<td>Attachments are notes or photos that you can add to jobs to provide the dispatchers and technicians with additional information. They can also add their own notes via our mobile or desktop application</td>
</tr>
<tr>
<td><a href="#users">User</a></td>
<td>Users are the users of our application. Currently we have 2 types of users: the <strong>dispatcher</strong> and the <strong>technician</strong>. Users can also have both roles if it makes sense for your use case. We have separate mobile applications for each role, as well as a single desktop web application for dispatchers to manage their workforce from the office.</td>
</tr>
<tr>
<td><a href="#survey-responses">Survey Response</a></td>
<td>Surveys are sent out to customers when an appointment or job is completed.</td>
</tr>
<tr>
<td><a href="#brands">Brand</a></td>
<td>You can assign jobs to your brands to control the branding (logo, copy, etc) of the application, customer portal, and notifications.</td>
</tr>
</tbody></table>

<h2 id="external-ids"><a name="external-ids"></a>External IDs</h2>

<p>To make it easier for you to integrate your existing system with Dispatch, several of our business objects have an attribute called <code class="prettyprint">external_ids</code>. This is an array of strings representing the ID or ID(s) of those objects in your own system. We use those for various purposes, such as:</p>

<ul>
<li>Identifying existing customers or organizations, instead of creating new ones, so you don&rsquo;t have to look them up before attempting to create</li>
<li>Allowing you to look up entities using your ID instead of ours.</li>
</ul>

<p>We do, however, recommend that you store Dispatch&rsquo;s business object ID for your objects somewhere in your system, since our external IDs support is limited.</p>

<aside class="warning">The external IDs feature is currently only available to job sources.</aside>

<h2 id="filtering-and-paginating">Filtering and Paginating</h2>

<p>For <code class="prettyprint">GET</code> requests, several endpoints allow you to filter the results based on certain record attributes. These are all provided as nested values on a <code class="prettyprint">filter</code> object within the query string, like so: <code class="prettyprint">?filter[job_id]=123&amp;filter[status]=scheduled</code></p>

<p>For all <code class="prettyprint">GET</code> requests that return multiple records, you can paginate by providing <code class="prettyprint">limit</code> and <code class="prettyprint">offset</code> parameters, like so (the maximum value for <code class="prettyprint">limit</code> is currently 100): <code class="prettyprint">?filter[job_id]=123&amp;filter[status]=scheduled&amp;limit=100&amp;offset=1000</code></p>

<h2 id="getting-data-back-from-dispatch">Getting Data Back from Dispatch</h2>

<p>You can obviously check up on your data by performing <code class="prettyprint">GET</code> requests, but we also allow you to subscribe to changes on your objects via <strong>webhooks</strong>. This feature is not self-service, but if you get in touch with your account manager we can walk you through the details. We hope to create a complete self-service webhook system sometime in the next few quarters.</p>

<h1 id="authentication">Authentication</h1>

<p>Our API is secured using simple OAuth2.0 bearer tokens. You can get a bearer token for your account by providing your <strong>public</strong> and <strong>secret</strong> keys that we will provide upon signing up for the platform.</p>

<p><strong>These tokens are temporary</strong>, so you will need to be able to handle 401 status codes from our system to retrieve a new token in the event that it is no longer valid.</p>

<h2 id="retrieving-a-bearer-token-client-credentials"><a name="client-credentials-auth"></a> Retrieving a Bearer Token - Client Credentials</h2>

<blockquote>
<p>Request:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"grant_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"client_credentials"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"public_key"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"secret_key"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer token value"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499868367</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">10800</span><span class="p">,</span><span class="w">
  </span><span class="nt">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"refresh token value"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Use this method to authenticate as a job source.</p>

<p><code class="prettyprint">POST /v3/oauth/token</code></p>

<h2 id="retrieving-a-bearer-token-user-credentials"><a name="user-auth"></a> Retrieving a Bearer Token - User Credentials</h2>

<blockquote>
<p>Request:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"grant_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your-email"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your-password"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"public_key"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"secret_key"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer token value"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499868367</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">10800</span><span class="p">,</span><span class="w">
  </span><span class="nt">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"refresh token value"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Use this method to authenticate a single service provider. We recommend you create a separate user account with a <code class="prettyprint">&quot;dispatcher&quot;</code> role for your integration to easily be able to track which actions were taken by the integration vs actual users.</p>

<p><code class="prettyprint">POST /v3/oauth/token</code></p>

<h2 id="refreshing-your-token">Refreshing your Token</h2>

<blockquote>
<p>Request:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"grant_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"refresh_token"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"refresh token you received with your original bearer token"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer token value"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499868367</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">10800</span><span class="p">,</span><span class="w">
  </span><span class="nt">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"refresh token value"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">POST /v3/oauth/token</code></p>

<h2 id="access-control-amp-permissions">Access Control &amp; Permissions</h2>

<p>As the source of the work, you have full access to the transactional data you send to Dispatch (meaning, the job and all child objects). However, depending on the relationship you have with the organizations, they may already be in our system and may already be receiving work from other sources. In that case, you will have limited access to the organizations, their customers, and their dispatchers and technicians. If you have a first-party network, you will have more access to those objects. We recommend you discuss this with your account manager so we can implement the best ACL for your use case.</p>

<p>If you are authenticated as a single service provider, you will have access to all objects within your organization.</p>

<h1 id="attachments"><a name="attachments"></a> Attachments</h1>

<p>Attachments represent notes or photos belonging to <a href="#jobs">jobs</a> in the Dispatch platform. These are useful for providing additional information to the service provider after they have already begun work.</p>

<h2 id="attributes">Attributes</h2>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Updatable</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>entity_type</td>
<td>string</td>
<td>Y</td>
<td>N</td>
<td>Type of parent entity. Currently only &ldquo;Job&rdquo; is supported.</td>
</tr>
<tr>
<td>entity_id</td>
<td>int</td>
<td>Y</td>
<td>N</td>
<td>ID of the parent job</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>N</td>
<td>Y</td>
<td>Content of the note</td>
</tr>
<tr>
<td>file_token</td>
<td>string</td>
<td>N</td>
<td>Y</td>
<td>File token (from <a href="#files-photos">files API</a>)</td>
</tr>
</tbody></table>

<h2 id="create-an-attachment">Create an Attachment</h2>

<blockquote>
<p>Request:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"entity_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Job"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"entity_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Here is the note"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"attachment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"entity_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Job"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"entity_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Here is the note"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-01T00:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-01T00:00:00Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">POST /v3/attachments</code></p>

<h2 id="list-attachments">List Attachments</h2>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"attachments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"entity_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Job"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"entity_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
      </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Here is a note"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">GET /v3/attachments</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>entity_type_eq</td>
<td>Type of parent object (currently only supported value is &ldquo;Job&rdquo;)</td>
</tr>
<tr>
<td>entity_id_eq</td>
<td>ID of the parent object</td>
</tr>
</tbody></table>

<h3 id="example-view-all-attachments-on-job-123">Example: view all attachments on job #123</h3>

<p><code class="prettyprint">GET https://api.dispatch.me/v3/attachments?filter[entity_type_eq]=Job&amp;filter[entity_id_eq]=123</code></p>

<h2 id="view-a-single-attachment">View a Single Attachment</h2>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"entity_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Job"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"entity_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Here is a note"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">GET /v3/attachments/:id</code></p>

<h2 id="update-attachment">Update Attachment</h2>

<blockquote>
<p>Request:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New note here"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"attachment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"entity_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Job"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"entity_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New note here"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-01T00:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-01T00:00:00Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">PATCH /v3/attachments/:id</code></p>

<h2 id="delete-attachment">Delete Attachment</h2>

<p><code class="prettyprint">DELETE /v3/attachments/:id</code></p>

<h1 id="appointments"><a name="appointments"></a> Appointments</h1>

<p>Appointments are scheduled times at which a technician will do work related to a <a href="#jobs">job</a>. Jobs may have zero or more appointments (whether appointments are used depends upon your workflow and the engagement of your service providers on our platform).</p>

<p>Appointments are required to send customers notifications for &ldquo;on my way&rdquo; and &ldquo;appointment scheduled&rdquo;.</p>

<h2 id="attributes">Attributes</h2>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Updatable</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>job_id</td>
<td>int</td>
<td>Y</td>
<td>N</td>
<td>ID of the parent job</td>
</tr>
<tr>
<td>time</td>
<td>string</td>
<td>N</td>
<td>Y</td>
<td>ISO8601 timestamp for the appointment&rsquo;s scheduled time</td>
</tr>
<tr>
<td>duration</td>
<td>int</td>
<td>N</td>
<td>Y</td>
<td>duration, in seconds, of the appointment. Defaults to <code class="prettyprint">7200</code> (2 hours)</td>
</tr>
<tr>
<td>user_id</td>
<td>int</td>
<td>N</td>
<td>Y</td>
<td>ID of the assigned technician</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td>Status of the appointment. See <a href="#appointment-statuses">Appointment Statuses</a></td>
</tr>
</tbody></table>

<h2 id="appointment-statuses"><a name="appointment-statuses"></a>Appointment Statuses</h2>

<p>Appointments can move freely between any of the supported statuses below. Via our mobile app, technicians can update the status of the appointment according to your workflow.</p>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>draft</td>
<td>A tentative appointment. May be missing information</td>
</tr>
<tr>
<td>scheduled</td>
<td>The appointment is scheduled</td>
</tr>
<tr>
<td>enroute</td>
<td>The technician is on the way</td>
</tr>
<tr>
<td>in_progress</td>
<td>The technician has arrived and has started the work</td>
</tr>
<tr>
<td>complete</td>
<td>The appointment is finished</td>
</tr>
<tr>
<td>canceled</td>
<td>The appointment has been canceled</td>
</tr>
</tbody></table>

<h3 id="special-status-behavior">Special Status Behavior</h3>

<ul>
<li>If you <em>schedule</em> an appointment, its parent job&rsquo;s status will also change to &ldquo;scheduled&rdquo;</li>
<li>If you <em>cancel</em> a job, the status of all child appointments will change to &ldquo;canceled&rdquo;</li>
</ul>

<h2 id="create-an-appointment">Create an Appointment</h2>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"job_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
  </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">456</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scheduled"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-01T00:00:00Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"appointment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"job_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
    </span><span class="nt">"organization_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scheduled"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-01T00:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="p">,</span><span class="w">
    </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">456</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">POST /v3/appointments</code></p>

<h2 id="list-appointments">List Appointments</h2>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"appointments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">GET /v3/appointments</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>job_id_eq</td>
<td>Parent job ID</td>
</tr>
<tr>
<td>job_id_in</td>
<td>Parent job IDs (separated by comma)</td>
</tr>
<tr>
<td>organization_id_eq</td>
<td>Parent organization Id</td>
</tr>
<tr>
<td>status_eq</td>
<td>Search for appointments in a specific status</td>
</tr>
<tr>
<td>status_in</td>
<td>Specific statuses (separated by comma)</td>
</tr>
<tr>
<td>time_gt</td>
<td>Show appointments scheduled after the given time (ISO8601 timestamp)</td>
</tr>
<tr>
<td>time_gteq</td>
<td>Show appointments scheduled on or after the given time (ISO8601 timestamp)</td>
</tr>
<tr>
<td>time_lt</td>
<td>Show appointments scheduled before the given time (ISO8601 timestamp)</td>
</tr>
<tr>
<td>time_lteq</td>
<td>Show appointments scheduled on or before the given time (ISO8601 timestamp)</td>
</tr>
<tr>
<td>user_id_eq</td>
<td>Show appointments assigned to a particular technician</td>
</tr>
<tr>
<td>user_id_in</td>
<td>Show appointments assigned to technicians (separated by comma)</td>
</tr>
<tr>
<td>user_id_null</td>
<td>Show appointments that are unassigned (value should be <code class="prettyprint">true</code> here)</td>
</tr>
</tbody></table>

<h2 id="view-a-single-appointment">View a Single Appointment</h2>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"job_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
  </span><span class="nt">"organization_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scheduled"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-01T00:00:00Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="p">,</span><span class="w">
  </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">456</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">GET /v3/appointments/:id</code></p>

<h2 id="update-appointment">Update Appointment</h2>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-02T00:00:00Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">7200</span><span class="p">,</span><span class="w">
  </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">789</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"appointment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"job_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
    </span><span class="nt">"organization_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scheduled"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-02T00:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">7200</span><span class="p">,</span><span class="w">
    </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">789</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">PATCH /v3/appointments/:id</code></p>

<h2 id="delete-appointment">Delete Appointment</h2>

<p><code class="prettyprint">DELETE /v3/appointments/:id</code></p>

<h1 id="brands"><a name="brands"></a> Brands</h1>

<aside class="notice">Brands are accessible only to job sources</aside>

<p>Brands represent different brands or divisions within your company, giving you full control over the copy and logo for the mobile and web applications, customer notifications, etc. Logos and job source details fall back to the account level if there is no <code class="prettyprint">brand_id</code> property present on a job.</p>

<h2 id="create-a-brand">Create a Brand</h2>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New Brand"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15551234567"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"logo_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9b553add-62cf-47c0-aec1-6705e395b4da"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"newbrand@newbrand.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"brand"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New Brand"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15551234567"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"logo_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9b553add-62cf-47c0-aec1-6705e395b4da"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"newbrand@newbrand.com"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">POST /v3/brands</code></p>

<p>For the <code class="prettyprint">logo_token</code> attribute, use the <code class="prettyprint">uid</code> attribute returned when you <a href="#upload-photo">upload your brand logo</a>.</p>

<h2 id="list-brands">List Brands</h2>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"brands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{},</span><span class="w">
    </span><span class="p">{}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">GET /v3/brands</code></p>

<aside class="notice">
There are no query parameters available for brands at the moment.
</aside>

<h2 id="update-brand">Update Brand</h2>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Changed Name"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"brand"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Changed Name"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"logo_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7961914c-7e8f-4012-a316-be00e7b1a40e"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15559876543"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">PATCH /v3/brands/:id</code></p>

<h2 id="delete-brand">Delete Brand</h2>

<aside class="warning">
Careful! If you delete a brand then all jobs currently within that brand will use your default &ldquo;account-level&rdquo; branding.
</aside>

<p><code class="prettyprint">DELETE /v3/brands/:id</code></p>

<h1 id="customers"><a name="customers"></a> Customers</h1>

<p>Customers represent the homeowner, landlord or other entity the work is being done for. Customers in Dispatch belong to individual organizations, so if you have multiple organizations doing work for the same customer in your system, there will be multiple instances of that customer in Dispatch. We do this to allow organizations to keep their own notes and make their own updates to customer data without affecting other organizations.</p>

<h2 id="attributes">Attributes</h2>

<p>Note that currently we support <strong>multiple phone numbers</strong> but only a <strong>single email address</strong> for customers. We have plans to improve this in the near future.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Updatable</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>organization_id</td>
<td>int</td>
<td>Y</td>
<td>N</td>
<td>ID of the parent organization</td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td></td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>N</td>
<td>Y</td>
<td></td>
</tr>
<tr>
<td>company_name</td>
<td>string</td>
<td>N</td>
<td>Y</td>
<td></td>
</tr>
<tr>
<td>notes</td>
<td>string</td>
<td>N</td>
<td>Y</td>
<td>Any additional notes about this customer</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>N</td>
<td>Y</td>
<td>Email address for the customer. This will be used to send email notifications if they are configured for your account.</td>
</tr>
<tr>
<td>phone_numbers</td>
<td>array&laquo;<a href="#phone-number-object">PhoneNumber</a>&raquo;</td>
<td>N</td>
<td>Y</td>
<td>See below for phone number object attributes</td>
</tr>
<tr>
<td>home_address</td>
<td><a href="#location-schema">Location</a></td>
<td>N</td>
<td>Y</td>
<td>This is used only when creating a new job for this customer in our application. For jobs that come in via our API, the <code class="prettyprint">job.address</code> property is used</td>
</tr>
<tr>
<td>billing_address</td>
<td><a href="#location-schema">Location</a></td>
<td>N</td>
<td>Y</td>
<td></td>
</tr>
<tr>
<td>external_ids</td>
<td>array&laquo;string&raquo;</td>
<td>N</td>
<td>Y</td>
<td>See <a href="#external-ids">external IDs</a></td>
</tr>
</tbody></table>

<h3 id="phone-number-object"><a name="phone-number-object"></a>Phone Number Object</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>number</td>
<td>string</td>
<td>Phone number in <a href="https://www.ietf.org/rfc/rfc3966.txt">RFC3966 format</a></td>
</tr>
<tr>
<td>primary</td>
<td>boolean</td>
<td>Set to <code class="prettyprint">true</code> if you want this number to receive SMS notifications</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>E.g. &ldquo;Mobile&rdquo;, &ldquo;Work&rdquo;</td>
</tr>
</tbody></table>

<h2 id="create-a-customer">Create a Customer</h2>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"organization_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"customer@email.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"phone_numbers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15551234567"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"primary"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mobile"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15559876543"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"primary"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"work"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joe"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Shmo"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"external_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"AAA123"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
    </span><span class="nt">"organization_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"customer@email.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"phone_numbers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15551234567"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"primary"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mobile"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15559876543"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"primary"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"work"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joe"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Shmo"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"external_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"AAA123"</span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">POST /v3/customers</code></p>

<p>Note that when you attempt to create a customer, we may find a duplicate of that customer already in our system. In that case, the data you provide will be merged onto the existing customer rather than be used to create a new one. You will receive the existing customer back in the response.</p>

<h2 id="update-a-customer">Update a Customer</h2>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Changed"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
    </span><span class="nt">"organization_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"customer@email.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"phone_numbers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15551234567"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"primary"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mobile"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15559876543"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"primary"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"work"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Changed"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Shmo"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"external_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"AAA123"</span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">PATCH /v3/customers/:id</code></p>

<h2 id="list-customers">List Customers</h2>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"customers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{},</span><span class="w">
    </span><span class="p">{}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email_eq</td>
<td>Find a customer by email</td>
</tr>
<tr>
<td>external_id_contains</td>
<td>Find a customer with a given external ID</td>
</tr>
<tr>
<td>organization_id_eq</td>
<td>Find a customer for a specific organization</td>
</tr>
</tbody></table>

<h2 id="delete-a-customer">Delete a Customer</h2>

<p><code class="prettyprint">DELETE /v3/customers/:id</code></p>

<h1 id="files-and-photos"><a name="files-photos"></a> Files and Photos</h1>

<p>You can upload photos and other files to share with service providers and customers using our <code class="prettyprint">/v3/datafiles</code> endpoint.</p>

<h2 id="uploading-a-file"><a name="upload-photo"></a>Uploading a file</h2>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight plaintext"><code>curl -H "Authorization: Bearer &lt;token&gt;" -F file=@test.png https://api.dispatch.me/v3/datafiles

</code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"datafile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"bucket_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-19T01:42:48Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.png"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"mime_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/png"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fe9194b3-3cc2-4862-af52-d8b59f7dd062"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">POST</code> using <code class="prettyprint">Content-Type: multipart/form-data</code> to <code class="prettyprint">/v3/datafiles</code></p>

<h2 id="view-a-file-by-uid">View a file by UID</h2>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight plaintext"><code>HTTP/1.1 302 Found
Location: https://s3.amazonaws.com/dispatch_staging/datafiles/fe9194b3-3cc2-4862-af52-d8b59f7dd062/test.png
</code></pre>
<p><code class="prettyprint">GET /v3/datafiles/:uid</code></p>

<h1 id="jobs"><a name="jobs"></a> Jobs</h1>

<p>Jobs are the core of the Dispatch experience. The job object includes the service location, customer information, description, and other details needed so the technician can get the work done. </p>

<h2 id="attributes">Attributes</h2>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Updatable</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td></td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>N</td>
<td>Y</td>
<td>Additional details for the job. Supports <a href="https://daringfireball.net/projects/markdown/syntax">markdown</a></td>
</tr>
<tr>
<td>service_type</td>
<td>string</td>
<td>N</td>
<td>Y</td>
<td>Type of service, e.g. &ldquo;plumbing&rdquo;</td>
</tr>
<tr>
<td>external_ids</td>
<td>array&laquo;string&raquo;</td>
<td>N</td>
<td>N</td>
<td>Your ID(s) for this job. See <a href="#external-ids">external-ids</a></td>
</tr>
<tr>
<td>address</td>
<td><a href="#location-schema">Location</a></td>
<td>Y</td>
<td>Y</td>
<td><a href="#location-schema">Location</a> of the job.</td>
</tr>
<tr>
<td>brand_id</td>
<td>int</td>
<td>N</td>
<td>N</td>
<td>Optional ID for your <a href="#brands">brand</a></td>
</tr>
<tr>
<td>customer_id</td>
<td>int</td>
<td>Y</td>
<td>Y</td>
<td>ID of the customer object.</td>
</tr>
<tr>
<td>organization_id</td>
<td>int</td>
<td>Y</td>
<td>N</td>
<td>ID of the assigned organization</td>
</tr>
<tr>
<td>service_fee</td>
<td>float</td>
<td>N</td>
<td>Y</td>
<td>Fee the customer owes for service</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td>Status of the job. See <a href="#job-statuses">job statuses</a></td>
</tr>
<tr>
<td>status_message</td>
<td>string</td>
<td>N</td>
<td>Y</td>
<td>Optional qualifier for the current status</td>
</tr>
</tbody></table>

<h2 id="job-statuses"><a name="job-statuses"></a>Job Statuses</h2>

<p>Jobs can move freely between any of the supported statuses below.</p>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>unscheduled</td>
<td>The job belongs to this organization but has not yet been scheduled</td>
</tr>
<tr>
<td>scheduled</td>
<td>The job is currently scheduled. Note that Dispatch automatically sets the job&rsquo;s status to &ldquo;scheduled&rdquo; if an appointment is created</td>
</tr>
<tr>
<td>paused</td>
<td>The job has started, but had to be paused</td>
</tr>
<tr>
<td>complete</td>
<td>The job has finished</td>
</tr>
<tr>
<td>canceled</td>
<td>The job is canceled - work no longer needs to be done.</td>
</tr>
</tbody></table>

<h2 id="job-offers">Job Offers</h2>

<p>If your workflow includes <strong>offering</strong> the job to an organization and requiring them to accept or reject it, you can create a job with status set to &ldquo;offered&rdquo;, which is a special status that has slightly different behavior in our applications. </p>

<h3 id="accepting-rejecting-on-behalf-of-organization"><a name="accept-reject-behalf"></a>Accepting/Rejecting on behalf of Organization</h3>

<blockquote>
<p>Accept Job w/ Appointment</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"appointment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ISO8601 Time"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="p">,</span><span class="w">
    </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Dispatchers can accept and reject job offers via our application. However, if you have another mechanism for job offer interaction, and want to keep the Dispatch system up to date, you can do so by making a <code class="prettyprint">POST</code> request to either <code class="prettyprint">/v3/jobs/:id/accept</code> or <code class="prettyprint">/v3/jobs/:id/reject</code>. </p>

<p>For accepting, if you provide appointment information, the job will move into &ldquo;scheduled&rdquo; status. Otherwise, it will move into &ldquo;unscheduled&rdquo;.</p>

<p>For rejecting, the job will move into &ldquo;rejected&rdquo; status and it will become read-only for the organization&rsquo;s users in our application.</p>

<aside class="notice">If you&rsquo;ll notice, we do not have a status called &ldquo;accepted&rdquo;. That&rsquo;s because when the job is accepted, it moves either into &ldquo;unscheduled&rdquo; or &ldquo;scheduled&rdquo; status, depending on if the dispatcher is also scheduling an appointment.</aside>

<h2 id="create-a-job">Create a Job</h2>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fix the Toilet"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The toilet is **clogged**."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"service_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PLB"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"street_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234 Test Avenue"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Boston"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MA"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02115"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/New_York"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"offered"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nt">"organization_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">254</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"job"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fix the Toilet"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The toilet is **clogged**."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"service_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PLB"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"street_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234 Test Avenue"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Boston"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02115"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/New_York"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"organization_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">254</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"offered"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joe"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Shmo"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"external_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"AAA123"</span><span class="p">],</span><span class="w">
      </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"joe.shmo@gmail.com"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"phone_numbers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15555555555"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mobile"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"primary"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">POST /v3/jobs</code></p>

<h2 id="list-jobs">List Jobs</h2>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"jobs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{},</span><span class="w">
    </span><span class="p">{}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>brand_id_eq</td>
<td>Show jobs in a certain brand</td>
</tr>
<tr>
<td>customer_id_eq</td>
<td>Show jobs for a certain customer</td>
</tr>
<tr>
<td>customer_id_in</td>
<td>Show jobs for a group of customers</td>
</tr>
<tr>
<td>external_ids_contains</td>
<td>Show jobs with a certain external ID</td>
</tr>
<tr>
<td>organization_id_eq</td>
<td>Show jobs assigned to a certain organization</td>
</tr>
<tr>
<td>organization_id_in</td>
<td>Show jobs assigned to a group of organizations</td>
</tr>
<tr>
<td>status_eq</td>
<td>Show jobs in a certain status</td>
</tr>
<tr>
<td>status_in</td>
<td>Show jobs in a group of statuses</td>
</tr>
<tr>
<td>status_not_eq</td>
<td>Show jobs that are not in a certain status</td>
</tr>
</tbody></table>

<h2 id="view-a-single-job">View a Single Job</h2>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fix the Toilet"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The toilet is **clogged**."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"service_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PLB"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"street_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234 Test Avenue"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Boston"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MA"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02115"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/New_York"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"organization_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">254</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"offered"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joe"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Shmo"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"external_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"AAA123"</span><span class="p">],</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"joe.shmo@gmail.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"phone_numbers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15555555555"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mobile"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"primary"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">GET /v3/jobs/:id</code></p>

<h2 id="update-job">Update Job</h2>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canceled"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"job"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fix the Toilet"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The toilet is **clogged**."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"service_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PLB"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"street_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234 Test Avenue"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Boston"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02115"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/New_York"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"organization_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">254</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canceled"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joe"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Shmo"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"external_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"AAA123"</span><span class="p">],</span><span class="w">
      </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"joe.shmo@gmail.com"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"phone_numbers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15555555555"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mobile"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"primary"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">PATCH /v3/jobs/:id</code></p>

<aside class="notice">Remember, to move a job from &ldquo;offered&rdquo; status, you need to <a href="#accept-reject-behalf">accept or reject it on behalf of the orgnanization</a> if they cannot do so in our application.</aside>

<h1 id="location-entity">Location Entity <a name="location-schema"></a></h1>

<p>Locations are not business objects in our system, but are attributes on several of our core business objects. </p>

<p>Currently Dispatch only supports locations in the US and Canada.</p>

<table><thead>
<tr>
<th>attribute</th>
<th>type</th>
<th>notes</th>
</tr>
</thead><tbody>
<tr>
<td>street_1</td>
<td>string</td>
<td>required</td>
</tr>
<tr>
<td>street_2</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>required</td>
</tr>
<tr>
<td>state</td>
<td>enum&laquo;string&raquo;</td>
<td>two-character abbreviation for the state.</td>
</tr>
<tr>
<td>postal_code</td>
<td>string</td>
<td>5-digit US or 6-character Canadian postal code</td>
</tr>
<tr>
<td>timezone</td>
<td>enum&laquo;string&raquo;</td>
<td>Timezone in <a href="https://www.iana.org/time-zones">IANA</a> format. <br/>If not provided we will attempt to find the timezone from the provided postal code.</td>
</tr>
</tbody></table>

<h1 id="organizations"><a name="organizations"></a> Organizations</h1>

<p>Organizations are the service providers that perform the work.</p>

<h2 id="attributes">Attributes</h2>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Updatable</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td></td>
</tr>
<tr>
<td>external_ids</td>
<td>array&laquo;string&raquo;</td>
<td>N</td>
<td>Y</td>
<td>Your ID(s) for this organization. See <a href="#external-ids">external ids</a></td>
</tr>
<tr>
<td>address</td>
<td><a href="#location-schema">Location</a></td>
<td>N</td>
<td>Y</td>
<td>Organization&rsquo;s physical address.</td>
</tr>
<tr>
<td>phone_number</td>
<td>string</td>
<td>N</td>
<td>Y</td>
<td>Phone number in <a href="https://www.ietf.org/rfc/rfc3966.txt">RFC3966 format</a></td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td></td>
</tr>
<tr>
<td>logo_token</td>
<td>string</td>
<td>N</td>
<td>Y</td>
<td>Token for organization&rsquo;s logo in our <a href="#files-photos">file system</a></td>
</tr>
</tbody></table>

<h2 id="create-an-organization">Create an Organization</h2>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joe's Plumbing"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"street_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"555 Test Avenue"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"street_2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unit 5"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Boston"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MA"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02115"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/New_York"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15551234567"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"joe@joesplumbing.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"external_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"AAA123"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joe's Plumbing"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"street_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"555 Test Avenue"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"street_2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unit 5"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Boston"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02115"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/New_York"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15551234567"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"joe@joesplumbing.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"external_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"AAA123"</span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">POST /v3/organizations</code></p>

<h3 id="create-an-initial-user-for-organization">Create an initial user for organization</h3>

<p>When creating an organization via <code class="prettyprint">POST /v3/organizations</code>, if you provide an additional <code class="prettyprint">boolean</code> parameter on the organization payload called <code class="prettyprint">create_user</code> and set it to <code class="prettyprint">true</code>, a <a href="#users">user</a> will be created with both the &ldquo;dispatcher&rdquo; and &ldquo;technician&rdquo; roles using the <code class="prettyprint">email</code> attribute on the organization. While that user will not be able to log in directly (we won&rsquo;t make up a password), he or she can start receiving emails for jobs and start interacting them in the Dispatch mobile or desktop application. From there, the new user can set a mobile number and password to be able to log in normally.</p>

<h2 id="list-organizations">List Organizations</h2>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"organizations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{},</span><span class="w">
    </span><span class="p">{}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>external_ids_contains</td>
<td>Show organizations with a certain external ID</td>
</tr>
</tbody></table>

<h2 id="view-a-single-organization">View a Single Organization</h2>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joe's Plumbing"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"street_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"555 Test Avenue"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"street_2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unit 5"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Boston"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MA"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02115"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/New_York"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15551234567"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"joe@joesplumbing.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"external_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"AAA123"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">GET /v3/organizations/:id</code></p>

<h2 id="update-an-organization">Update an Organization</h2>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15557826394"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"organization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joe's Plumbing"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"street_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"555 Test Avenue"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"street_2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unit 5"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Boston"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02115"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/New_York"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15557826394"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"joe@joesplumbing.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"external_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"AAA123"</span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">PATCH /v3/organizations/:id</code></p>

<h2 id="delete-an-organization">Delete an Organization</h2>

<p><code class="prettyprint">DELETE /v3/organizations/:id</code></p>

<h1 id="survey-responses"><a name="survey-responses"></a> Survey Responses</h1>

<p>Survey responses are submitted by customers via our customer portal. They&rsquo;re sent when an appointment moves into &ldquo;complete&rdquo; status, or, if there are no appointments, when the job itself moves to &ldquo;complete&rdquo;. Surveys are <strong>read only</strong> from your perspective - we send them out automatically to the customer, and then you&rsquo;ll be able to view them by making a <code class="prettyprint">GET</code> request to <code class="prettyprint">/v3/survey_responses</code> with the appropriate filters.</p>

<aside class="notice">Note that to avoid spam, we <b>do not</b> send a survey to a customer if they have received one for the same job within the past 24 hours.</aside>

<h2 id="attributes">Attributes</h2>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>job_id</td>
<td>int</td>
<td></td>
</tr>
<tr>
<td>appointment_id int</td>
<td>ID of the parent appointment. May be <code class="prettyprint">null</code>, if there was no appointment.</td>
<td></td>
</tr>
<tr>
<td>rating</td>
<td>int</td>
<td>0-5 rating from the customer</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>Additional feedback from the customer</td>
</tr>
</tbody></table>

<h2 id="list-survey-responses">List Survey Responses</h2>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"survey_responses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"rating"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
      </span><span class="nt">"job_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nt">"appointment_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w">
      </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Technician was really nice"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">GET /v3/survey_responses</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>job_id_eq</td>
<td>Show survey responses for a specific job</td>
</tr>
</tbody></table>

<h1 id="users"><a name="users"></a> Users</h1>

<p>Users are the dispatchers managing the workforce for an organization, or the technician performing the work.</p>

<h2 id="user-authentication">User Authentication</h2>

<aside class="notice">Note that users can log in either using their <b>phone number</b>, in which case we will send a code to their phone to verify their identity, or using a combination of their <b>email</b> and <b>password</b>. As such, if you provide a phone number, it must be a valid mobile number for the user to be able to log in.</aside>

<h2 id="access-control">Access Control</h2>

<ul>
<li>For organizations in a <strong>third-party network</strong>, you have <strong>only read access</strong> to their users.</li>
<li>For organizations in a <strong>first-party network</strong>, you have <strong>read and write access</strong> to their users. You can create and update users, and move them within organizations in your first-party network.</li>
<li>If you&rsquo;re authenticated as a user within an organization, you  have <strong>read and write access</strong> to that single organization.</li>
</ul>

<h2 id="user-attributes">User Attributes</h2>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Required</th>
<th>Updatable</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>organization_id</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td>Organization this user is assigned to</td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td></td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td></td>
</tr>
<tr>
<td>address</td>
<td><a href="#location-schema">Location</a></td>
<td>N</td>
<td>Y</td>
<td></td>
</tr>
<tr>
<td>phone_number</td>
<td>string</td>
<td>N</td>
<td>Y</td>
<td>Phone number in <a href="https://www.ietf.org/rfc/rfc3966.txt">RFC3966 format</a>.</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>N</td>
<td>Y</td>
<td></td>
</tr>
<tr>
<td>photo_token</td>
<td>string</td>
<td>N</td>
<td>Y</td>
<td>Token for user&rsquo;s photo in our <a href="#files-photos">file system</a>. This will show to the customer on the customer portal.</td>
</tr>
<tr>
<td>roles</td>
<td>array&laquo;string&raquo;</td>
<td>Y</td>
<td>Y</td>
<td>Valid roles are either &ldquo;dispatcher&rdquo; or &ldquo;technician&rdquo;. Users can have both roles. Note that users with only the &ldquo;technician&rdquo; role cannot log in to the desktop application.</td>
</tr>
<tr>
<td>password</td>
<td>string</td>
<td>N</td>
<td>Y</td>
<td>User&rsquo;s password. Only used for creation and updating. Not returned in <code class="prettyprint">GET</code> requests.</td>
</tr>
</tbody></table>

<h2 id="create-a-user">Create a User</h2>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"organization_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jim"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"the Technician"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"technician"</span><span class="p">],</span><span class="w">
  </span><span class="nt">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15551234567"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jim@joesplumbing.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"supersecretpassword"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12834</span><span class="p">,</span><span class="w">
    </span><span class="nt">"organization_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jim"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"the Technician"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"technician"</span><span class="p">],</span><span class="w">
    </span><span class="nt">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15551234567"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jim@joesplumbing.com"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">POST /v3/users</code></p>

<h2 id="list-users">List Users</h2>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{},</span><span class="w">
    </span><span class="p">{}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">GET /v3/users</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>by_user_roles</td>
<td>Search for users in the provided role(s).</td>
</tr>
<tr>
<td>email_eq</td>
<td>Search for users by email</td>
</tr>
<tr>
<td>organization_id_eq</td>
<td>Search for users in a specific organization</td>
</tr>
</tbody></table>

<h2 id="view-a-single-user">View a Single User</h2>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12834</span><span class="p">,</span><span class="w">
  </span><span class="nt">"organization_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jim"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"the Technician"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"technician"</span><span class="p">],</span><span class="w">
  </span><span class="nt">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15551234567"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jim@joesplumbing.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">GET /v3/users/:id</code></p>

<h2 id="update-a-user">Update a User</h2>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"newpassword"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12834</span><span class="p">,</span><span class="w">
    </span><span class="nt">"organization_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jim"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"the Technician"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"technician"</span><span class="p">],</span><span class="w">
    </span><span class="nt">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+15551234567"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jim@joesplumbing.com"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code class="prettyprint">PATCH /v3/users/:id</code></p>

<h2 id="delete-a-user">Delete a User</h2>

<p><code class="prettyprint">DELETE /v3/users/:id</code></p>

          <h1 id="errors">Errors</h1>

<p>The Dispatch API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request is malformed or otherwise invalid</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your OAuth2 bearer token is incorrect.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; Your credentials are correct, but you&rsquo;re not allowed to perform this action.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; Requested resource could not be found</td>
</tr>
<tr>
<td>422</td>
<td>Unprocessable Entity &ndash; Your request payload did not pass our validation rules. See response body for details.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests &ndash; You&rsquo;ve exceeded your rate limit.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarily offline for maintanance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="json">json</a>
          </div>
      </div>
    </div>
  </body>
</html>
